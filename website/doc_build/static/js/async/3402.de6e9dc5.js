"use strict";(self.webpackChunkelectron_rspack_website=self.webpackChunkelectron_rspack_website||[]).push([["3402"],{367:function(e,s,r){r.r(s),r.d(s,{default:function(){return d}});var n=r(651),c=r(6971);function a(e){let s=Object.assign({h1:"h1",a:"a",ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",div:"div",h2:"h2"},(0,c.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"outputsourcemap",children:["output.sourceMap",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#outputsourcemap",children:"#"})]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.strong,{children:"类型："})}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",children:"type SourceMap = {\n  js?: Rspack.Configuration['devtool'];\n  css?: boolean;\n};\n"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.strong,{children:"默认值："})}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",children:"const defaultSourceMap = {\n  js: isDev ? 'cheap-module-source-map' : false,\n  css: false,\n};\n"})}),"\n",(0,n.jsx)(s.p,{children:"用于设置是否生成 source map 文件，以及生成哪一种格式的 source map。"}),"\n",(0,n.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,n.jsx)(s.div,{className:"rspress-directive-title",children:"什么是 source map"}),(0,n.jsx)(s.div,{className:"rspress-directive-content",children:(0,n.jsx)(s.p,{children:"source map 是保存源代码映射关系的信息文件，它记录了编译后的代码的每一个位置，以及所对应的编译前的位置。通过 source map，可以在调试编译后的代码时，直接查看对应的源代码。"})})]}),"\n",(0,n.jsxs)(s.h2,{id:"默认行为",children:["默认行为",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#默认行为",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"默认情况下，Rsbuild 的 source map 生成规则如下："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"在开发模式构建时，会生成 JS 文件的 source map，便于进行开发调试；不会生成 CSS 文件的 source map。"}),"\n",(0,n.jsx)(s.li,{children:"在生产模式构建时，不会生成 JS 和 CSS 文件的 source map，以提供最佳的构建性能。"}),"\n"]}),"\n",(0,n.jsxs)(s.h2,{id:"js-source-map",children:["JS Source Map",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#js-source-map",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["JS 文件的 source map 通过 ",(0,n.jsx)(s.code,{children:"sourceMap.js"})," 来控制，可以传入 Rspack ",(0,n.jsx)(s.a,{href:"https://rspack.dev/zh/config/devtool",target:"_blank",rel:"noopener noreferrer",children:"devtool"})," 选项支持的所有 source map 格式，设置为 ",(0,n.jsx)(s.code,{children:"false"})," 为关闭。"]}),"\n",(0,n.jsx)(s.p,{children:"比如，如果你需要在所有模式生成高质量的 source map，可以设置为："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"export default {\n  output: {\n    sourceMap: {\n      js: 'source-map',\n    },\n  },\n};\n"})}),"\n",(0,n.jsxs)(s.p,{children:["你也可以根据 ",(0,n.jsx)(s.code,{children:"NODE_ENV"})," 来设置不同的 source map 格式："]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"export default {\n  output: {\n    sourceMap: {\n      js:\n        process.env.NODE_ENV === 'production'\n          ? // 生产模式使用高质量的 source map 格式\n            'source-map'\n          : // 开发模式使用性能更好的 source map 格式\n            'cheap-module-source-map',\n    },\n  },\n};\n"})}),"\n",(0,n.jsxs)(s.h2,{id:"css-source-map",children:["CSS Source Map",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#css-source-map",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["CSS 文件的 source map 通过 ",(0,n.jsx)(s.code,{children:"sourceMap.css"})," 来控制，设置为 ",(0,n.jsx)(s.code,{children:"true"})," 为开启，设置为 ",(0,n.jsx)(s.code,{children:"false"})," 为关闭。"]}),"\n",(0,n.jsx)(s.p,{children:"比如，如果需要生成 CSS 文件的 source map，可以设置为："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-js",children:"export default {\n  output: {\n    sourceMap: {\n      css: true,\n    },\n  },\n};\n"})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,c.ah)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}let d=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh%2Fconfig%2Foutput%2Fsource-map.mdx"]={toc:[{text:"默认行为",id:"默认行为",depth:2},{text:"JS Source Map",id:"js-source-map",depth:2},{text:"CSS Source Map",id:"css-source-map",depth:2}],title:"output.sourceMap",frontmatter:{}}}}]);